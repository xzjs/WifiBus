<div class="out_container_title">
    <div class="container_title">
        <div class="left">
            <ul>
            	<li class="box_one">
                    <a></a>
                </li>
                <li class="box_two">
                    <a></a>
                </li>
            </ul>
        </div>
        <div id="main-work"></div>
        <div class="clr"></div>
        
        <div class="display">
            <select id="line_selector" onchange="get_buses('{:U('Bus/select')}',this.value,'bus_no_selector')">
                <volist name="line_list" id="vo" empty=" ">
                    <option value={$vo.id}>{$vo.name}</option>
                </volist>
            </select>

            <div class="search">
                <p>
                    <input type="text" id="search_keys"> <a><img
                        src="__PUBLIC__/images/home_search.png" alt=""
                        onclick="search_buses('{:U('Bus/select')}',$('#search_keys').val())"></a>
                </p>
            </div>
            <ul class="select" id="bus_no_selector">
                <volist name="bus_list" id="vo" empty=" ">
                    <li><a href="#" onclick="bus_selected('{$vo.id}')">{$vo.no}</a></li>
                </volist>
            </ul>
        </div>
       
        <div class="road_display">
            <div class="road_display">
	            <div class="left_display">
	                <ul>
	                	<volist name="line_list" id="vo" empty=" ">
	                  	  <li><a href="javascript:void(0);"
	                           onclick="line_selected('{$vo.id}')">{$vo.name}</a></li>
	                	</volist>
	                </ul>
	            </div>
        	</div>
            <div class="hide_details hideTemp">
                <div class="road_details ">
                    <h1>1路上设备<br>正在工作的车辆</h1>

                    <div></div>
                    <ul>
                        <li><a href="#">鲁BH8305</a></li>
                        <li><a href="#">鲁BH8306</a></li>
                        <li><a href="#">鲁BH8307</a></li>
                    </ul>
                </div>
                <div class="bus_details ">
                    <h1>1路上设备<br>正在工作的车辆</h1>

                    <div></div>
                    <ul>
                        <li><a href="#">鲁BH8308</a></li>
                        <li><a href="#">鲁BH8309</a></li>
                        <li><a href="#">鲁BH8310</a></li>
                        <li><a href="#">鲁BH8311</a></li>
                    </ul>
                </div>
            </div>
            <div class="hide_details hideTemp ">
                <div class="road_details">
                    <h1>18路上设备<br>正在工作的车辆</h1>

                    <div></div>
                    <ul>
                        <li><a href="#">鲁BH8312</a></li>
                        <li><a href="#">鲁BH8313</a></li>
                        <li><a href="#">鲁BH8314</a></li>
                    </ul>
                </div>
                <div class="bus_details ">
                    <h1>18路上设备<br>正在工作的车辆</h1>

                    <div></div>
                    <ul>
                        <li><a href="#">鲁BH8315</a></li>
                        <li><a href="#">鲁BH8316</a></li>
                        <li><a href="#">鲁BH8317</a></li>
                        <li><a href="#">鲁BH8318</a></li>
                    </ul>
                </div>
            </div>
            <div class="hide_details hideTemp ">
                <div class="road_details ">
                    <h1>4路上设备<br>正在工作的车辆</h1>

                    <div></div>
                    <ul>
                        <li><a href="#">鲁BH8319</a></li>
                        <li><a href="#">鲁BH8320</a></li>
                        <li><a href="#">鲁BH8321</a></li>
                    </ul>
                </div>
                <div class="bus_details ">
                    <h1>4路上设备<br>正在工作的车辆</h1>

                    <div></div>
                    <ul>
                        <li><a href="#">鲁BH8322</a></li>
                        <li><a href="#">鲁BH8323</a></li>
                        <li><a href="#">鲁BH8324</a></li>
                        <li><a href="#">鲁BH8325</a></li>
                    </ul>
                </div>
            </div>
            <div class="hide_details hideTemp ">
                <div class="road_details">
                    <h1>26路上设备<br>正在工作的车辆</h1>

                    <div></div>
                    <ul>
                        <li><a href="#">鲁BH8326</a></li>
                        <li><a href="#">鲁BH8327</a></li>
                        <li><a href="#">鲁BH8328</a></li>
                    </ul>
                </div>
                <div class="bus_details ">
                    <h1>26路上设备<br>正在工作的车辆</h1>

                    <div></div>
                    <ul>
                        <li><a href="#">鲁BH8329</a></li>
                        <li><a href="#">鲁BH8330</a></li>
                        <li><a href="#">鲁BH8331</a></li>
                        <li><a href="#">鲁BH8332</a></li>
                    </ul>
                </div>
            </div>
            <div class="hide_details hideTemp ">
                <div class="road_details ">
                    <h1>21路上设备<br>正在工作的车辆</h1>

                    <div></div>
                    <ul>
                        <li><a href="#">鲁BH8305</a></li>
                        <li><a href="#">鲁BH8305</a></li>
                        <li><a href="#">鲁BH8305</a></li>
                    </ul>
                </div>
                <div class="bus_details ">
                    <h1>21路上设备<br>正在工作的车辆</h1>

                    <div></div>
                    <ul>
                        <li><a href="#">鲁BH8305</a></li>
                        <li><a href="#">鲁BH8305</a></li>
                        <li><a href="#">鲁BH8305</a></li>
                        <li><a href="#">鲁BH8305</a></li>
                    </ul>
                </div>
            </div>
            <div class="hide_details hideTemp ">
                <div class="road_details">
                    <h1>22路上设备<br>正在工作的车辆</h1>

                    <div></div>
                    <ul>
                        <li><a href="#">鲁BH8305</a></li>
                        <li><a href="#">鲁BH8305</a></li>
                        <li><a href="#">鲁BH8305</a></li>
                    </ul>
                </div>
                <div class="bus_details ">
                    <h1>22路上设备<br>正在工作的车辆</h1>

                    <div></div>
                    <ul>
                        <li><a href="#">鲁BH8305</a></li>
                        <li><a href="#">鲁BH8305</a></li>
                        <li><a href="#">鲁BH8305</a></li>
                        <li><a href="#">鲁BH8305</a></li>
                    </ul>
                </div>
            </div>
            <div class="hide_details hideTemp ">
                <div class="road_details">
                    <h1>23路上设备<br>正在工作的车辆</h1>

                    <div></div>
                    <ul>
                        <li><a href="#">鲁BH8305</a></li>
                        <li><a href="#">鲁BH8305</a></li>
                        <li><a href="#">鲁BH8305</a></li>
                    </ul>
                </div>
                <div class="bus_details ">
                    <h1>23路上设备<br>正在工作的车辆</h1>

                    <div></div>
                    <ul>
                        <li><a href="#">鲁BH8305</a></li>
                        <li><a href="#">鲁BH8305</a></li>
                        <li><a href="#">鲁BH8305</a></li>
                        <li><a href="#">鲁BH8305</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="clear"></div>
</div>

<script type="text/javascript" src="__PUBLIC__/js/echarts-all.js"></script>
<script type="text/javascript">

    var myChartWork = echarts.init(document.getElementById('main-work'));

    var f = '{$f}';
    var num = '{$num}';
    var optionWork;
    
    line_selected(0);
    
    /**
     * 获取该线路信息
     * @param str：线路Id
     */
    function line_selected(line_id){
    	switch (f) {
	        case 'work':
	            get_work_info(line_id);
	            optionWork=workOption(num);
	            break;
	        case 'online':
	               //optionWork=onlineOption(num);
	            break;
	        case 'flow':
	            get_flow_info('line',line_id);
	            break;
	        case 'ad':
	                //optionWork=adOption(num);
	            break;
	        default :
	            break;
    	}
    	myChartWork.setOption(optionWork);
    }
    
    function bus_selected(bus_id){
    	
    	switch (f) {
	        case 'work':
	        	
	            break;
	        case 'online':
	                //optionWork=onlineOption(num);
	            break;
	        case 'flow':
	        	get_flow_info('line',line_id);
	            break;
	        case 'ad':
	                //optionWork=adOption(num);
	            break;
	        default :
	            break;
	    }
	    myChartWork.setOption(optionWork);
    }
    
    /**
     * 显示某线路上的车辆的车牌号列表
     * @param str：线路Id
     */
    function get_buses(url,id,display) {

    	$.post(url, {
    		is_getbuslist : 1,
    		line_id : id
    	}, function(data, status) {

    		if (status == 4 || status == "success") {
    			var bus_info = eval(data);
    			var bus_list = "";
    			//alert("d");
    			for (var i = 0; i < bus_info.length; i++) {
    				                                            
    				bus_list += "<li>" +
    						"<a href='#' onclick=line_selected("+bus_info[i].id+")>"+ bus_info[i].no + "</a>"
    						+"</li>";
    			}
    			//alert(bus_list);
    			$("ul#"+display).html(bus_list);
    		
    		}
    	});
    }
    
    /**
     * 根据车牌号搜索车辆
     * 
     * @param str：搜索关键字
     */
    function search_buses(url,keys) {
    	
    	$.post(url, {
    		is_getbuslist : 1,
    		search_keys : keys
    	}, function(data, status) {
    		
    		if (status == 4 || status == "success") {
    			var bus_info = eval(data);
    			var bus_list = "";
    			
    			for (var i = 0; i < bus_info.length; i++) {
    				bus_list += "<li>" +
    				"<a href='#' onclick=bus_selected("+bus_info[i].id+")>"+ bus_info[i].no + "</a>"
    				+"</li>";
    				}
    			
    			$("ul#bus_no_selector").html(bus_list);
    		}
    	});
    }
    
    function get_work_info(line_id){
    	/* $.post(url, {
    		is_getbuslist : 1,
    		line_id : id
    	}, function(data, status) {

    		if (status == 4 || status == "success") {
    			var bus_info = eval(data);
    			var bus_list = "";
    			//alert("d");
    			for (var i = 0; i < bus_info.length; i++) {
    				                                            
    				bus_list += "<li>" +
    						"<a href='#' onclick=line_selected("+bus_info[i].id+")>"+ bus_info[i].no + "</a>"
    						+"</li>";
    			}
    			//alert(bus_list);
    			$("ul#"+display).html(bus_list);
    		
    		}
    	}); */
    }
    
</script>